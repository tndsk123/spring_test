<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="board">
	<select id="list" resultType="com.example.test.model.board.dto.BoardDTO">
		select * from board
	</select>
	<select id="view" resultType="com.example.test.model.board.dto.BoardDTO">
		select bno,p_division,s_division,title,max_fund,end_date,company_name,unit,min_fund,
		(end_date-start_date) now_date, start_date from board where bno=#{bno}
	</select>
	<update id="buy">
		update board set now_fund=now_fund+#{now_fund}, support=support+1, progress=(#{now_fund}/max_fund*100)
		where bno=#{bno}
	</update>
</mapper>